<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solutions</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <nav>
        <div class="logo">
            <h1>TechEarthüåç</h1>
        </div>
        <ul>
            <a href="index.html" style="color: white; text-decoration: none;">
                <li><i class="fa-solid fa-house"></i>Home</li>
            </a>
            <li><i class="fa-solid fa-bullseye"></i>Goals</li>
            <a href="solutions.html" style="color: white; text-decoration: none;">
                <li><i class="fa-solid fa-lightbulb"></i>Solutions</li>
            </a>
            <a href="about.html">
                <li><i class="fa-regular fa-address-card"></i>About</li>
            </a>
        </ul>
        <div class="done" style="width: 100%; align-items: center; justify-content: center;">
            <div class="second_box">
                <a href="index.html" style="color: white; text-decoration: none;">
                    <li>Home</li>
                </a>
                <li>Goals</li>
                <a href="solutions.html" style="color: white; text-decoration: none;">
                    <li>Solutions</li>
                </a>
                <a href="about.html">
                    <li>About</li>
                </a>
            </div>
        </div>
    </nav>
    <div style="background-color: rgb(255, 255, 255);">
        <div class="main10"
            style="background-image: url(background.png); background-size: cover; background-position: center;">
            <div style="display: flex; align-items: center; justify-content: center;">
                <div class="solutions" style="width: 80%;">
                    <br><br><br>
                    <h1
                        style="font-family: 'Times New Roman', Times, serif; -webkit-text-stroke: 2px rgb(246, 246, 246); text-decoration: underline; text-align: left; font-size: 40px;">
                        Find Smart City Solutions Near You
                    </h1>
                    <br><br>
                    <p
                        style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; font-size: 18px; color: rgb(255, 255, 255); font-weight: 400; width: 80%;">
                        Explore your city like never before! Our platform helps you locate nearby public transport
                        stations,
                        smart dustbins for efficient waste disposal, and EV charging stations for a sustainable future.
                        With
                        an
                        interactive map and real-time updates, navigating your smart city has never been easier. Stay
                        informed,
                        reduce your carbon footprint, and be a part of the innovation driving urban sustainability.
                    </p>
                    <br><br><br>
                </div>
            </div>
        </div>
        <br><br><br>
        <div class="mapContainer" style="display: flex; align-items: center; justify-content: center;">
            <div style="width: 80%;">
                <div class="map1">
                    <div class="transport">
                        <h1
                            style="color: rgb(0, 0, 0); font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">
                            Search
                            Nearby Transport stations</h1>
                        <br><br>
                        <div id="map"
                            style="height: 500px; width: 100%; border: 4px solid black; border-radius: 50px; box-shadow: 0px 0px 20px black;">
                        </div>
                    </div>
                </div>
                <br><br><br>
                <div class="map2">
                    <div class="ev">
                        <h1
                            style="color: rgb(0, 0, 0); font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">
                            Search
                            Nearby Gas stations</h1>
                        <br><br>
                        <div id="mapEv"
                            style="height: 500px; width: 100%; border: 4px solid black; border-radius: 50px; box-shadow: 0px 0px 20px black;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <br><br>
    <h1 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; text-align: center;">
        Calculate your carbon footprint</h1>
    <br>
    <div class="carbon_footprint">
        <div class="inputArea">
            <h1
                style="color: white; margin: 20px 0px; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; text-align: center;">
                Calculator</h1>
            <div style="display: flex; align-items: center; justify-content: center;">
                <div class="main" style="width: 90%; background-color: #34495E;">
                    <input type="text" placeholder="Electricity Bill (in rupee)"
                        style="height: 40px; width: 100%; margin: 15px 0px" id="electricBill">
                    <input type="text" placeholder="Natural Gas Usage (in kwh)"
                        style="height: 40px; width: 100%; margin: 15px 0px" id="naturalGasUsage">
                    <input type="text" placeholder="Oil usage (in litre)"
                        style="height: 40px; width: 100%; margin: 15px 0px" id="oilUsage">
                    <input type="text" placeholder="Lpg Gas usage (in kg)"
                        style="height: 40px; width: 100%; margin: 15px 0px" id="lpgUsage">
                    <input type="text" placeholder="Waste produce (in kg)"
                        style="height: 40px; width: 100%; margin: 15px 0px" id="wasteProduced">
                    <br><br>
                    <button class="btn btn-primary" id="calculate">Calculate</button>
                    <button class="btn btn-primary mx-3">Clear Input</button>
                </div>
            </div>
        </div>
        <div class="inputArea">
            <h1
                style="color: white; margin: 20px 0px; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; text-align: center;">
                Carbon Footprint</h1>
            <div class="another">
                <table>
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Emission</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Electricity</td>
                            <td id="elec"></td>
                        </tr>
                        <tr>
                            <td>Natural Gas</td>
                            <td id="natu"></td>
                        </tr>
                        <tr>
                            <td>Oil</td>
                            <td id="oil"></td>
                        </tr>
                        <tr>
                            <td>LPG</td>
                            <td id="lpg"></td>
                        </tr>
                        <tr>
                            <td>Waste</td>
                            <td id="waste"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <br>
            <hr style="background-color: white; width: 80%; height: 5px; margin: auto;">
            <br>
            <h6 style="text-align: center; color: white;" id="inner">
            </h6>
        </div>
    </div>
    <br><br><br>
    <div class="air">
        <h1 style="text-align: center; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">
            Data of your Surrounding</h1>
        <br><br><br>
        <div style="display: flex; align-items: center; justify-content: center;">
            <div class="box">
                <div class="weather">
                    <div id="weather">
                        <p>Weather: ${weather}</p>
                        <p>Temperature: ${temperature}¬∞C</p>
                        <p>Humidity: ${humidity}%</p>
                        <p>Wind Speed: ${windSpeed} km/h</p>
                        <p>Cloud Coverage: ${windSpeed} km/h</p>
                    </div>
                </div>
                <div class="weather">
                    <div id="weather2">
                        <p>Wind Direction: ${weather}</p>
                        <p>Temperature: ${temperature}¬∞C</p>
                        <p>Overall: Clear conditions throughout the day.</p>
                        <hr style="width: 100%; background-color: white; height: 5px;">
                        <p style="width: 80%;">Note: This is a overall data of your surrounding and it may vary</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <br><br><br>
    <div class="footer">
        <div class="first_column" style="height: 80%; width: 50%;">
            <div class="main5" style="margin: 10px 0px;">
                <div class="list">
                    <li>Home</li>
                    <li>Goals</li>
                    <li>About</li>
                    <li>Email</li>
                    <li>Contact</li>
                    <li>Solutions</li>
                </div>
            </div>
            <div class="main11">
                <div class="list2">
                    <li>Home</li>
                    <li>Goals</li>
                    <li>About</li>
                    <li>Email</li>
                    <li>Contact</li>
                    <li>Solutions</li>
                </div>
            </div>
            <br>
            <div class="main5">
                <div class="apps">
                    <i class="fa-brands fa-instagram"></i>
                    <i class="fab fa-facebook"></i>
                    <i class="fa-brands fa-x-twitter"></i>
                    <i class="fa-brands fa-discord"></i>
                    <i class="fa-brands fa-threads"></i>
                </div>
            </div>
            <div class="main6">
                <div class="apps">
                    <i class="fa-brands fa-instagram"></i>
                    <i class="fab fa-facebook"></i>
                    <i class="fa-brands fa-x-twitter"></i>
                    <i class="fa-brands fa-discord"></i>
                    <i class="fa-brands fa-threads"></i>
                </div>
            </div>
            <br>
            <div style="color: white;">
                <p style="text-align: center; font-size: 17px;">rupammandal204@gmail.com</p>
            </div>
        </div>
    </div>
    </div>
    <script src="script.js"></script>
    <script>
        const map = L.map('map').setView([0, 0], 2);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        }).addTo(map);
        const mapEv = L.map('mapEv').setView([0, 0], 2);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        }).addTo(mapEv);
        navigator.geolocation.getCurrentPosition(
            (position) => {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;

                console.log(`Your location: Latitude ${latitude}, Longitude ${longitude}`);
                map.setView([latitude, longitude], 14);
                mapEv.setView([latitude, longitude], 14);
                L.marker([latitude, longitude])
                    .addTo(map)
                    .bindPopup('You are here!')
                    .openPopup();

                L.marker([latitude, longitude])
                    .addTo(mapEv)
                    .bindPopup('You are here!')
                    .openPopup();
                fetchNearbyEVStations(latitude, longitude);
                fetchNearbyBusStops(latitude, longitude);
            },
            (error) => {
                console.error("Geolocation failed: ", error.message);
                alert("Unable to retrieve your location. Please enable location access.");
            },
            {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0,
            }
        );
        function fetchNearbyEVStations(lat, lon) {
            const overpassApiUrl = "https://overpass-api.de/api/interpreter";
            const radius = 5000;
            const query = `
        [out:json];
        node["amenity"="fuel"](around:${radius},${lat},${lon});
        out;
    `;
            const body = `data=${encodeURIComponent(query)}`;

            fetch(overpassApiUrl, {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: body,
            })
                .then((response) => response.json())
                .then((data) => {
                    if (data.elements && data.elements.length > 0) {
                        data.elements.forEach((element) => {
                            if (element.lat && element.lon) {
                                L.marker([element.lat, element.lon])
                                    .addTo(mapEv)
                                    .bindPopup(element.tags.name || "EV Station");
                            }
                        });
                    } else {
                        alert("No nearby EV stations found.");
                    }
                })
                .catch((error) => {
                    console.error("Error fetching EV stations: ", error);
                });
        }
        function fetchNearbyBusStops(lat, lon) {
            const overpassApiUrl = "https://overpass-api.de/api/interpreter";
            const radius = 5000;
            const query = `
        [out:json];
        node["highway"="bus_stop"](around:${radius},${lat},${lon});
        out;
    `;
            const body = `data=${encodeURIComponent(query)}`;

            fetch(overpassApiUrl, {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: body,
            })
                .then((response) => response.json())
                .then((data) => {
                    if (data.elements && data.elements.length > 0) {
                        data.elements.forEach((element) => {
                            if (element.lat && element.lon) {
                                L.marker([element.lat, element.lon])
                                    .addTo(map)
                                    .bindPopup(element.tags.name || "Bus Stop");
                            }
                        });
                    } else {
                        alert("No nearby bus stops found.");
                    }
                })
                .catch((error) => {
                    console.error("Error fetching bus stops: ", error);
                });
        }

    </script>
</body>

</html>